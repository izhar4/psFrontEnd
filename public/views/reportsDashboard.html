<div ng-controller="companiesCntrl">    
    <header class="dashbboard-header">
        <div class="col-xs-12 col-sm-6 col-md-6 dash-logo-section">
            <img class="img-responsive" src="img/logo-without-name.png" alt="Logo" title="" ui-sref="home" />
            <p><a href="tel:+877865-PURE">(877) 865-PURE</a></p>
        </div>
        <div class="col-xs-12 col-sm-4 col-md-4 dashbrd-options pull-right text-right">
            <a ng-if="showCreate" ui-sref="dynstate({id: 'CreateSurveys' })">+ New Survey</a>
            <div class="dropdown user-options">
                <button class="btn btn-default dropdown-toggle survey-style" type="button" id="user-options" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <img class="img-responsive" src="img/dashbrd-header-menu.png" alt="menu" title="" />
                </button>
                <ul class="dropdown-menu" aria-labelledby="user-actions">
                    <li class="username">Hello {{userEmail}}</li>
                    <li ng-repeat="link in dsboardLink"> <button type="button" class="btn btn-link" ui-sref="dynstate({id: {{'link.featureKey'}} })" >{{link.featureLabel}}</button></li>
                    <li><a ng-click="resetPassword()">Reset Password</a></li>
                    <li><a ng-click="logout()">Logout</a></li>
                 </ul>
            </div>
        </div>
        <div class="clearfix"></div>
    </header>
    <div class="container" style="margin-top: 100px">
        <button type="button" class="btn btn-primary pull-left submit-btn" style="margin-left: 20px;" ui-sref="home">Back to Dashboard</button>
        <h2 class="text-center"><img style="margin:0 auto;" class="img-responsive" src="img/logo-without-name.png" alt="Logo" title="" ui-sref="home" /> Reports Dashboard</h2>
        <div id="reports" class="dashbrd-survey-table">
            <div class="reports-inner">
                <ul class="nav nav-tabs custom-tabs report_dasbrd" role="tablist">
                    <li role="presentation" class="active" ng-class="{ active: isReportSet('performance') }"><a href="" aria-controls="performance" role="tab" data-toggle="tab" ng-click="setReportTab('performance')">Survey Performance Report</a></li>
                    <li role="presentation" ng-class="{ active: isReportSet('stats') }"><a href="" aria-controls="stats" role="tab" data-toggle="tab" ng-click="setReportTab('stats')">Daily Statistics Report</a></li>
                    <li role="presentation" ng-class="{ active: isReportSet('trans') }"><a href="" aria-controls="trans" role="tab" data-toggle="tab" ng-click="setReportTab('trans')">Survey Transaction Report</a></li>
                    <li role="presentation" ng-class="{ active: isReportSet('sales') }"><a href="" aria-controls="sales" role="tab" data-toggle="tab" ng-click="setReportTab('sales')">Buyer Sales Report</a></li>
                    <li role="presentation" ng-class="{ active: isReportSet('suplr_report') }"><a href="" aria-controls="suplr_report" role="tab" data-toggle="tab" ng-click="setReportTab('suplr_report')">Supplier Report</a></li>

                    <li role="presentation" ng-class="{ active: isReportSet('psid_report') }"><a href="" aria-controls="psid_report" role="tab" data-toggle="tab" ng-click="setReportTab('psid_report')">PSID report</a></li>

                    <li role="presentation" ng-class="{ active: isReportSet('stc_report') }"><a href="" aria-controls="stc_report" role="tab" data-toggle="tab" ng-click="setReportTab('stc_report')">STC report</a></li>

                    <li role="presentation" ng-class="{ active: isReportSet('trans_status_report') }"><a href="" aria-controls="trans_status_report" role="tab" data-toggle="tab" ng-click="setReportTab('trans_status_report')">Transaction Status</a></li>
                </ul>
                <div class="tab-content">
                    <div id="performance" ng-show="isReportSet('performance')">
                        <h3>Survey Performance Report</h3>
                        <div class="form-inline survey-performance">
                            <div class="col-xs-3 col-sm-3 col-md-3 form-group">
                                <label>Survey Status</label>
                                <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="transactionStatus" selected-model="selectedTransStatus" checkboxes="true" extra-settings="mainSettings"></div>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label>Buyer name</label>
                               <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="buyersArr" selected-model="selectedBuyersArr" checkboxes="true" extra-settings="mainSettings"></div>
                            </div>
                        </div>
                        <form class="report-form form-horizontal" name="reportDownload">
                            <div class="form-group pull-left">
                                 <label>Country</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white; color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedCountry.contryName}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="countryFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectCountry('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="country in countries | filter:countryFilter"><a href="" ng-click="selectCountry(country)">{{country.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div> 
                            
                            <div class="form-group pull-left">
                                <label>Date Range</label>
                                <input type="text" date-range-picker class="form-control date-picker" id="date" name="daterange" ng-model="operatorReportData" placeholder="Enter data range" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <button type="button" ng-click="getReport(operatorReportData, 'performance')">Find</button>
                            </div>
                        </form>
                    </div>
                    <div id="stats" ng-show="isReportSet('stats')">
                        <h3>Daily Statistics Report</h3>
                        <form class="report-form form-horizontal" name="reportDownload">
                            <div class="form-group pull-left">
                                 <label>Country</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white; color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedCountry.contryName}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="countryFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectCountry('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="country in countries | filter:countryFilter"><a href="" ng-click="selectCountry(country)">{{country.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div> 
                            <div class="form-group pull-left">
                                <label>Date Range</label>
                                <input type="text" date-range-picker class="form-control date-picker" id="date" name="daterange" ng-model="operatorReportData" placeholder="Enter data range" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <button type="button" ng-click="getReport(operatorReportData, 'stats')">Find</button>
                            </div>
                        </form>
                    </div>
                    <div id="trans" ng-show="isReportSet('trans')">
                        <h3>Survey Transaction Report</h3>
                        <form class="report-form form-horizontal" name="reportDownload">
                            <div class="form-group pull-left">
                                 <label>Country</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white; color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedCountry.contryName}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="countryFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectCountry('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="country in countries | filter:countryFilter"><a href="" ng-click="selectCountry(country)">{{country.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div> 
                            <div class="form-group pull-left">
                                <label>Date Range</label>
                                <input type="text" date-range-picker class="form-control date-picker" id="date" name="daterange" ng-model="operatorReportData" placeholder="Enter data range" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <button type="button" ng-click="getReport(operatorReportData, 'trans')">Find</button>
                            </div>
                        </form>
                    </div>
                    <div id="sales" ng-show="isReportSet('sales')">
                        <h3>Buyer Sales Report</h3>
                        <form class="report-form form-horizontal" name="reportDownload">
                            <div class="form-group pull-left">
                                 <label>Country</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white; color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedCountry.contryName}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="countryFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectCountry('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="country in countries | filter:countryFilter"><a href="" ng-click="selectCountry(country)">{{country.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div> 
                            <div class="form-group pull-left">
                                <label>Supplier</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white;color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedSupplier.name}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="supplrFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectSupplier('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="supplrs in suppliers | filter:supplrFilter"><a href="" ng-click="selectSupplier(supplrs)">{{supplrs.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div>
                            <div class="form-group pull-left">
                                <label>Date Range</label>
                                <input type="text" date-range-picker class="form-control date-picker" id="date" name="daterange" ng-model="operatorReportData" placeholder="Enter data range" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <button type="button" ng-click="getReport(operatorReportData, 'sales')">Find</button>
                            </div>
                        </form>
                    </div>
                    <div id="suplr_report" ng-show="isReportSet('suplr_report')">
                        <h3>Supplier Report</h3>
                        <form class="report-form form-horizontal" name="reportDownload">
                            <div class="form-group pull-left">
                                 <label>Country</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white; color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedCountry.contryName}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="countryFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectCountry('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="country in countries | filter:countryFilter"><a href="" ng-click="selectCountry(country)">{{country.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div> 
                            <div class="form-group pull-left">
                                <label>Buyer</label>
                                <div class="dropdown dropdown-scroll" style="margin-top: -20px;">
                                    <button class="btn btn-default dropdown-toggle survey-style width100" style="height: 50px; background: white;color: black;" type="button" id="Survey_Country" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    {{selectedBuyers.name}}
                                    </button>
                                    <ul class="dropdown-menu company_search" aria-labelledby="Survey_Country">
                                        <li role="presentation">
                                          <div class="input-group input-group-sm search-control"> <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-search"></span>
                                            </span>
                                            <input type="text" class="form-control" placeholder="Search" ng-model="buyerFilter" ng-click="avoidClick($event)"></input>
                                          </div>
                                        </li>
                                        <li><a href="" ng-click="selectBuyers('all')">All</a></li>
                                        <li role="separator" class="divider"></li>
                                        
                                        <li ng-repeat="buyer in buyersArr | filter:buyerFilter"><a href="" ng-click="selectBuyers(buyer)">{{buyer.name}}</a></li>
                                        
                                    </ul>
                                </div>
                            </div>
                            <div class="form-group pull-left">
                                <label>Date Range</label>
                                <input type="text" date-range-picker class="form-control date-picker" id="date" name="daterange" ng-model="operatorReportData" placeholder="Enter data range" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <button type="button" ng-click="getReport(operatorReportData, 'suplr_report')">Find</button>
                            </div>
                        </form>
                    </div>
                    <div id="psid_report" ng-show="isReportSet('psid_report')">
                        <div class="form-group">
                            <input type="radio" value="survey_data" ng-model="psidCheckModels.reportType" />Survey History
                            <input type="radio" value="profile" ng-model="psidCheckModels.reportType" /> Profile Data
                            <input type="radio" value="supplier_data" ng-model="psidCheckModels.reportType" /> Supplier History
                        </div> 
                        <form class="form-inline report-form form-horizontal" name="reportDownload">
                             <div class="form-group pull-left">
                                <input class="form-control" type="text"  ng-model="psidTransObject.psid" placeholder="Enter PSID" ng-change="checkInputBoxStatus()" ng-disabled="inputBoxStatus.psid_input" />
                            </div>
                            <div class="form-group pull-left">
                                <input class="form-control" type="text"  ng-model="psidTransObject.resp_id" placeholder="Enter ps_supplier_respondent_id" ng-change="checkInputBoxStatus()" ng-disabled="inputBoxStatus.respondent_input" />
                            </div>
                            <div class="form-group pull-left">
                                <input class="form-control" type="text"  ng-model="psidTransObject.transaction_id" placeholder="Enter transaction_id" ng-change="checkInputBoxStatus()" ng-disabled="inputBoxStatus.transaction_input" />
                            </div>
                            <div class="form-group pull-right">
                                <input class="form-control" type="text"  ng-model="psidTransObject.session_id" placeholder="Enter ps_supplier_session_id" ng-change="checkInputBoxStatus()" ng-disabled="inputBoxStatus.session_input" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group" style="display: -webkit-box;">
                                <button type="button" ng-click="psidTransactionReport()">Find</button>
                            </div>
                        </form>   
                    </div>
                    <div id="stc_report" ng-show="isReportSet('stc_report')">
                        <h3>Survey Transaction Report</h3>
                        <form class="report-form stc-report form-horizontal" name="reportDownload">
                            <div class="form-group pull-left">
                                <input class="form-control" type="text"  ng-model="psidTransObject.transaction_id" placeholder="Enter transaction_id" ng-change="checkInputBoxStatus()" ng-disabled="inputBoxStatus.transaction_input" />
                            </div>
                            <div class="form-group pull-left">
                                <input class="form-control" type="text"  ng-model="psidTransObject.session_id" placeholder="Enter ps_supplier_session_id" ng-change="checkInputBoxStatus()" ng-disabled="inputBoxStatus.session_input" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <button type="button" ng-click="surveyTrafficReport()">Find</button>
                            </div>
                        </form>   
                    </div>

                    <div class="survey-form mar145" id="trans_status_report" ng-show="isReportSet('trans_status_report')">
                        <h3>Transaction Status Report</h3> <br/><br/>
                        <div class="form-inline">
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label>Country</label>
                                <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="countries" selected-model="selectedContries" checkboxes="true" extra-settings="mainSettings"></div>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label>Language</label>
                                <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="languageCnt" selected-model="selectedLanguage" checkboxes="true" extra-settings="mainSettings" model-name="'language'"></div>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3 form-group">
                                <label>Survey Status</label>
                                <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="transactionStatus" selected-model="selectedTransStatus" checkboxes="true" extra-settings="mainSettings"></div>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label>Buyer name</label>
                               <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="buyersArr" selected-model="selectedBuyersArr" checkboxes="true" extra-settings="mainSettings"></div>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label>Supplier Name</label>
                                <div class="col-xs-3 col-sm-3 col-md-3" style="width: 100%;" report-dropdown-multiselect="" options="suppliers" selected-model="selectedSuppliersArr" checkboxes="true" extra-settings="mainSettings"></div>
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label>Date Range</label>
                               <input type="text" date-range-picker class="form-control date-picker" id="date" name="daterange" ng-model="operatorReportData" placeholder="Enter data range" style="height: 66px;" />
                            </div>
                            
                            <div class="clearfix"></div>
                            <form class="report-form form-horizontal" name="reportDownload">
                                 <div class="form-group" style="width: 100%">
                                    <button type="button" ng-click="transactionStatusReport(operatorReportData)">Find</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="margin: 40px 10px 10px;">
        <!-- Performance Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('performance') && performance.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead>
                    <tr>
                        <tr class="success" style="background-color: #cceacc !important;">
                            <th class="text-left">Survey Id</th>
                            <th class="text-left">Survey Name</th>
                            <th class="text-left">Buyer Name</th>
                            <th class="text-left">CPI</th>
                            <th class="text-left">Total Revenue</th>
                            <th class="text-left">Total Cost</th>
                            <th class="text-left">Margin</th>
                            <th class="text-left">Completes In given Time Frame</th>
                            <th class="text-left">Total Completes</th>
                            <th class="text-left">Completes Remaining</th>
                            <th class="text-left">Stated LOI</th>
                            <th class="text-left">Stated IR</th>
                            <th class="text-left">Current LOI</th>
                            <th class="text-left">Current IR</th>
                            <th class="text-left">Buyer Clicks</th>
                            <th class="text-left">Valid Clicks</th>
                            <th class="text-left">Total Clicks</th>
                            <th class="text-left">Buyer EPC</th>
                            <th class="text-left">Valid EPC</th>
                            <th class="text-left">Total EPC</th>
                        </tr>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in performance">
                        <td class="text-left">{{item._id}}</td>
                        <td class="text-left">{{item.surveyName}}</td>
                        <td class="text-left">{{item.bName}}</td>
                        <td class="text-left">{{item.cpi | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.buyerRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.supplierRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.margin | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.completesInTimeFrame | isNaNThenZero}}</td>
                        <td class="text-left">{{item.totalCompletes | isNaNThenZero}}</td>
                        <td class="text-left">{{item.completesRemaining | isNaNThenZero}}</td>
                        <td class="text-left">{{item.loi_launch | isNaNThenZero}}</td>
                        <td class="text-left">{{item.incidence_launch | isNaNThenZero}}</td>
                        <td class="text-left">{{item.loi | isNaNThenZero}}</td>
                        <td class="text-left">{{item.incidence_current | isNaNThenZero}}</td>
                        <td class="text-left">{{item.buyerClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.totalClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.buyerEPC | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.validEPC | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.totalEPC | commaSepratedNumber}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Stats Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('stats') && statsData.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr>
                        <tr class="success" style="background-color: #cceacc !important;">
                            <th class="text-left">Total Revenue</th>
                            <th class="text-left">Overall CPI</th>
                            <th class="text-left">Total Cost</th>
                            <th class="text-left">Margin</th>
                            <th class="text-left">Completes</th>
                            <th class="text-left">Margin per Complete</th>
                            <th class="text-left">Buyer Clicks</th>
                            <th class="text-left">Valid Clicks</th>
                            <th class="text-left">Total Clicks</th>
                        </tr>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in statsData">
                        <td class="text-left">{{item.buyerRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.overallCpi | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.supplierRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.margin | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.completes | isNaNThenZero}}</td>
                        <td class="text-left">{{item.marginPerComplete | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.buyerClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.totalClicks | isNaNThenZero}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Trans Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('trans') && transData.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr>
                        <tr class="success" style="background-color: #cceacc !important;">
                            <th class="text-left">Survey Id</th>
                            <th class="text-left">Survey Name</th>
                            <th class="text-left">Total Revenue</th>
                            <th class="text-left">Total Cost</th>
                            <th class="text-left">Margin</th>
                            <th class="text-left">Completes</th>
                            <th class="text-left">Buyer Clicks</th>
                            <th class="text-left">Valid Clicks</th>
                            <th class="text-left">Total Clicks</th>
                            <th class="text-left">Buyer Epc</th>
                            <th class="text-left">Valid Epc</th>
                            <th class="text-left">Total Epc</th>
                        </tr>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in transData">
                        <td class="text-left">{{item._id}}</td>
                        <td class="text-left">{{item.surveyName}}</td>
                        <td class="text-left">{{item.buyerRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.supplierRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.margin | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.completes | isNaNThenZero}}</td>
                        <td class="text-left">{{item.buyerClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.totalClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.buyerEpc | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.validEpc | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.totalEpc | commaSepratedNumber}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Sales Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('sales') && salesData.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr>
                        <tr class="success" style="background-color: #cceacc !important;">
                            <th class="text-left">Buyer_Name</th>
                            <th class="text-left">Total Revenue</th>
                            <th class="text-left">Total Completes</th>
                            <th class="text-left">Valid Clicks</th>
                            <th class="text-left">Total Clicks</th>
                            <th class="text-left">Valid EPC</th>
                            <th class="text-left">Total EPC</th>
                        </tr>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in salesData">
                        <td class="text-left">{{item.buyerName}}</td>
                        <td class="text-left">{{item.buyerRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.completes | isNaNThenZero}}</td>
                        <td class="text-left">{{item.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.totalClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.epc | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.totalEpc | commaSepratedNumber}}</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="danger">
                        <td class="text-left">Total</td>
                        <td class="text-left">{{grandTotal.buyerRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{grandTotal.completes | isNaNThenZero}}</td>
                        <td class="text-left">{{grandTotal.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{grandTotal.totalClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{grandTotal.epc | commaSepratedNumber}}</td>
                        <td class="text-left">{{grandTotal.totalEpc | commaSepratedNumber}}</td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <!-- Suppliers Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('suplr_report') && supplierData.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr class="success" style="background-color: #cceacc !important;">
                        <th class="text-left">Supplier_Name</th>
                        <th class="text-left">Total Cost</th>
                        <th class="text-left">Total Completes</th>
                        <th class="text-left">Valid Clicks</th>
                        <th class="text-left">Total Clicks</th>
                        <th class="text-left">Valid EPC</th>
                        <th class="text-left">Total EPC</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in supplierData">
                        <td class="text-left">{{item.supplierName}}</td>
                        <td class="text-left">{{item.supplierRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.completes | isNaNThenZero}}</td>
                        <td class="text-left">{{item.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.totalClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{item.epc | commaSepratedNumber}}</td>
                        <td class="text-left">{{item.totalEpc | commaSepratedNumber}}</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="danger">
                        <td class="text-left">Total</td>
                        <td class="text-left">{{grandTotal.supplierRevenue | commaSepratedNumber}}</td>
                        <td class="text-left">{{grandTotal.completes | isNaNThenZero}}</td>
                        <td class="text-left">{{grandTotal.validClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{grandTotal.totalClicks | isNaNThenZero}}</td>
                        <td class="text-left">{{grandTotal.epc | commaSepratedNumber}}</td>
                        <td class="text-left">{{grandTotal.totalEpc | commaSepratedNumber}}</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

     <!-- Survey Data Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('psid_report') && psidReportArr.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr class="success" style="background-color: #cceacc !important;">
                        <th class="text-left">Survey Id</th>
                        <th class="text-left">Survey Name</th>
                        <th class="text-left">Transaction ID</th>
                        <th class="text-left">Status</th>
                        <th class="text-left">Buyer Name</th>
                        <th class="text-left">Supplier Name</th>
                        <th class="text-left">Supplier Session Id</th>
                        <th class="text-left">Respondent Loi</th>
                        <th class="text-left">Buyer CPI</th>
                        <th class="text-left">Supplier CPI</th>
                        <th class="text-left">Entry Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in psidReportArr">
                        <td class="text-left">{{item.srv_id}}</td>
                        <td class="text-left">{{item.srv_name}}</td>
                        <td class="text-left">{{item.trans_id}}</td>
                        <td class="text-left">{{item.survey_status}}</td>
                        <td class="text-left">{{item.b_name}}</td>
                        <td class="text-left">{{item.sup_nm}}</td>
                        <td class="text-left">{{item.sup_sid || 'NA'}}</td>
                        <td class="text-left">{{item.res_loi || 'NA'}}</td>
                        <td class="text-left">{{item.res_buy_cpi || 'NA'}}</td>
                        <td class="text-left">{{item.res_sup_cpi || 'NA'}}</td>
                        <td class="text-left">{{item.survey_start}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Supplier Data Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('psid_report') && supplierHistoryData.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr class="success" style="background-color: #cceacc !important;">
                        <th class="text-left">Supplier Name</th>
                        <th class="text-left">Respondent Id</th>
                        <th class="text-left">Last Survey Start</th>
                        <th class="text-left">Total Valid Clicks</th>
                        <th class="text-left">Total Completes</th>
                        <th class="text-left">Total CPI</th>
                        <th class="text-left">Device ID</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in supplierHistoryData">
                        <td class="text-left">{{item.sup_nm}}</td>
                        <td class="text-left">{{item.sup_res_id || 'NA'}}</td>
                        <td class="text-left">{{item.last_start_date}}</td>
                        <td class="text-left">{{item.valid_click || 'NA'}}</td>
                        <td class="text-left">{{item.completes || 'NA'}}</td>
                        <td class="text-left">{{item.cpi_total || 'NA'}}</td>
                        <td class="text-left">{{item.deviceId || 'NA'}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Profile Data Table -->
        <div class="table-responsive sort_table" ng-if="isReportSet('psid_report') && profileDataReporrt.length > 0">
            <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
                <thead class="not-fixed">
                    <tr class="success" style="background-color: #cceacc !important;">
                        <th class="text-left">Qualification Code</th>
                        <th class="text-left">Condition Code</th>
                        <th class="text-left">Input Type</th>
                        <th class="text-left">Input date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in profileDataReporrt">
                        <td class="text-left">{{item.qual_code}}</td>
                        <td class="text-left">{{item.cond_code}}</td>
                        <td class="text-left">{{item.input_type}}</td>
                        <td class="text-left">{{item.input_date}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Survey Traffic Report PD-1508--> 
    <div class="table-responsive sort_table" ng-if="isReportSet('stc_report') && surveyTrafficRecord.length > 0">
       <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
            <thead class="not-fixed">
                <tr class="success" style="background-color: #cceacc !important;">
                    <th class="text-left">Survey ID</th>
                    <th class="text-left">PSID</th>
                    <th class="text-left">Transaction ID</th>
                    <th class="text-left">Survey Name</th>
                    <th class="text-left">Survey Country</th>
                    <th class="text-left">Survey Language</th>
                    <th class="text-left">Supplier ID</th>
                    <th class="text-left">Supplier Name</th>
                    <th class="text-left">Supplier Respondent ID</th>
                    <th class="text-left">Supplier Sid</th>
                    <th class="text-left">Buyer ID</th>
                    <th class="text-left">Buyer Name</th>
                    <th class="text-left">PS Entry DateTime</th>
                    <th class="text-left">Buyer Survey Entry Datetime</th>
                    <th class="text-left">Buyer Survey Return Datetime</th>
                    <th class="text-left">PS Exit Datetime</th>
                    <th class="text-left">Respondent Status Code</th>
                    <th class="text-left">Respondent Status Description</th>
                    <th class="text-left">Offer ID</th>
                    <th class="text-left">Expected Supplier CPI</th>
                    <th class="text-left">Expected Buyer CPI</th>
                    <th class="text-left">Expected Buyer CPI Fx</th>
                    <th class="text-left">CR</th>
                    <th class="text-left">ER</th>
                    <th class="text-left">Block</th>
                    <th class="text-left">Is Block Factor</th>
                    <th class="text-left">GPP</th>
                    <th class="text-left">GPP LOI</th>
                    <th class="text-left">GPP IR</th>
                    <th class="text-left">Respondent LOI</th>
                    <th class="text-left">Respondent Buyer CPI</th>
                    <th class="text-left">Respondent Buyer CPI Fx</th>
                    <th class="text-left">Respondent Supplier CPI</th>
                    <th class="text-left">Reconciliation Status</th>
                    <th class="text-left">Reconciliation Date</th>
                    <th class="text-left">Reconciliation Reason</th>
                    <th class="text-left">Transaction Original Status</th>
                    <th class="text-left">Transaction Original Description</th>
                    <th class="text-left">PS_Termination Reason</th>
                    <th class="text-left">PS_QuotaFull Reason</th>
                    <th class="text-left">Gender</th>
                    <th class="text-left">Gender Code</th>
                    <th class="text-left">Age</th>
                    <th class="text-left">Income</th>
                    <th class="text-left">Race</th>
                    <th class="text-left">Race Code</th>
                    <th class="text-left">BeraRace</th>
                    <th class="text-left">BeraRace Code</th>
                    <th class="text-left">HispanicOrigin</th>
                    <th class="text-left">HispanicOrigin Code</th>
                    <th class="text-left">Relationship</th>
                    <th class="text-left">Relationship Code</th>
                    <th class="text-left">Employment</th>
                    <th class="text-left">Employment Code</th>
                    <th class="text-left">Education</th>
                    <th class="text-left">Education Code</th>
                    <th class="text-left">Device</th>
                    <th class="text-left">Device Code</th>
                    <th class="text-left">Device Type</th>
                    <th class="text-left">ZipCode</th>
                    <th class="text-left">Children Count</th>
                    <th class="text-left">Child1 Age</th>
                    <th class="text-left">Child1 Gender</th>
                    <th class="text-left">Child2 Age</th>
                    <th class="text-left">Child2 Gender</th>
                    <th class="text-left">Child3 Age</th>
                    <th class="text-left">Child3 Gender</th>
                    <th class="text-left">Child4 Age</th>
                    <th class="text-left">Child4 Gender</th>
                    <th class="text-left">Child5 Age</th>
                    <th class="text-left">Child5 Gender</th>
                    <th class="text-left">Region</th>
                    <th class="text-left">Division</th>
                    <th class="text-left">Browser</th>
                    <th class="text-left">UserAgent</th>
                    <th class="text-left">IP</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in surveyTrafficRecord">
                    <td class="text-left">{{item.srv_id}}</td>
                    <td class="text-left">{{item.PSID}}</td>
                    <td class="text-left">{{item.trans_id}}</td>
                    <td class="text-left">{{item.srv_name || 'NA'}}</td>
                    <td class="text-left">{{item.srv_cnt || 'NA'}}</td>
                    <td class="text-left">{{item.srv_lng || 'NA'}}</td>
                    <td class="text-left">{{item.sup_id || 'NA'}}</td>
                    <td class="text-left">{{item.sup_nm || 'NA'}}</td>
                    <td class="text-left">{{item.sup_res_id || 'NA'}}</td>
                    <td class="text-left">{{item.sup_sid || 'NA'}}</td>
                    <td class="text-left">{{item.b_id || 'NA'}}</td>
                    <td class="text-left">{{item.b_name || 'NA'}}</td>
                    <td class="text-left">{{item.ps_ent_dt || 'NA'}}</td>
                    <td class="text-left">{{item.b_srv_ent || 'NA'}}</td>
                    <td class="text-left">{{item.b_srv_rtn_dt || 'NA'}}</td>
                    <td class="text-left">{{item.ps_ext_dt || 'NA'}}</td>
                    <td class="text-left">{{item.res_st_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_st_des || 'NA'}}</td>
                    <td class="text-left">{{item.offerId || 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.expected_sup_cpi) ? item.cpi.expected_sup_cpi : item.expected_sup_cpi || 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.expected_byr_cpi) ? item.cpi.expected_byr_cpi :item.expected_byr_cpi || 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.expected_byr_cpi_fx) ? item.cpi.expected_byr_cpi_fx : 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.cr) ? item.cpi.cr : 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.er) ? item.cpi.er : 'NA'}}</td>
                    <td class="text-left">{{item.block_num || 'NA'}}</td>
                    <td class="text-left">{{item.is_factor_block || 'NA'}}</td>
                    <td class="text-left">{{(item.block_num) ? item.block_num -1  : 'NA'}}</td>
                    <td class="text-left">{{item.gpp.LOI || 'NA'}}</td>
                    <td class="text-left">{{item.gpp.IR || 'NA'}}</td>
                    <td class="text-left">{{item.res_loi || 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.byr_cpi) ? item.cpi.byr_cpi : item.res_buy_cpi || 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.byr_cpi_fx) ? item.cpi.byr_cpi_fx : 'NA'}}</td>
                    <td class="text-left">{{(item.cpi && item.cpi.sup_cpi) ? item.cpi.sup_cpi : item.res_sup_cpi || 'NA'}}</td>
                    <td class="text-left">{{item.rec_elgb || 'NA'}}</td>
                    <td class="text-left">{{item.rec_dt || 'NA'}}</td>
                    <td class="text-left">{{item.rec_rsn || 'NA'}}</td>
                    <td class="text-left">{{item.orig_st_cd || 'NA'}}</td>
                    <td class="text-left">{{item.orig_st_des || 'NA'}}</td>
                    <td class="text-left">{{item.ps_term_rsn || 'NA'}}</td>
                    <td class="text-left">{{item.ps_quota_rsn || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.gndr || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.gndr_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.age || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.hhi || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.race || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.race_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.bera_race || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.bera_race_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.bera_hispanic || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.bera_hispanic_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.rln || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.rln_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.emp || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.emp_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.edu || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.edu_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.dvce || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.dvce_cd || 'NA'}}</td>
                    <td class="text-left">{{item.device_type || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.zip_cd || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld1_ag || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld1_gndr || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld2_ag || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld2_gndr || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld3_ag || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld3_gndr || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld4_ag || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld4_gndr || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld5_ag || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.chld5_gndr || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.rgn || 'NA'}}</td>
                    <td class="text-left">{{item.res_prof.dvsn || 'NA'}}</td>
                    <td class="text-left">{{item.traceInfo.browser || 'NA'}}</td>
                    <td class="text-left">{{item.traceInfo.source || 'NA'}}</td>
                    <td class="text-left">{{item.host.ip || 'NA'}}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Transaction Status Report -->
    <div class="table-responsive sort_table" ng-if="isReportSet('trans_status_report') && transactionStatusArr.length > 0">
        <table class="table table-striped table-hover" datatable="ng" dt-options="dtOption"  dt-columns="dtColumns" dt-column-defs="dtColumnDef">
            <thead class="not-fixed">
                <tr>
                    <tr class="success" style="background-color: #cceacc !important;">
                        <th class="text-left">Status Name</th>
                        <th class="text-left">Status Count</th>
                        <th class="text-left">% of Total Count</th>
                    </tr>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in transactionStatusArr">
                    <td class="text-left">{{item._id.statusName}}</td>
                    <td class="text-left">{{item.count}}</td>
                    <td class="text-left">{{item.percentage}}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr class="danger">
                    <td class="text-left">Total</td>
                    <td class="text-left">{{totalTransStatus.grandTotal}}</td>
                    <td class="text-left"></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <!-- loading icon -->
    <div class="overlay-div" ng-show="loader.show">
        <div id="loader-wrapper">
            <div id="loader"><span></span></div>
        </div>
    </div>
    <br><br>
</div>